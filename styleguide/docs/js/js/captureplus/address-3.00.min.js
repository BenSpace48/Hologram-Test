/*! Copyright © 2009-2013 Postcode Anywhere (Holdings) Ltd. (http://www.postcodeanywhere.co.uk)
*
* Address v3.00
* Component for address lookup integrations.
*
* WEB-1-2 24/05/2013 14:28:04
*/
;(function(n,t){function o(){r.addEventListener?(i.ignore(r,"DOMContentLoaded",o),f=!0,i.ready()):r.readyState==="complete"&&(i.ignore(r,"onreadystatechange",o),f=!0,i.ready())}function c(){r.readyState==="complete"?(f=!0,i.ready()):(r.addEventListener?i.listen(r,"DOMContentLoaded",o):i.listen(r,"onreadystatechange",o),i.listen(n,"load",o))}function h(n){var t,r,u;if(i.blockRequests&&i.waitingRequest){i.requestQueue=[n.index];return}if(n.block&&(i.blockRequests=!0),n.queue&&i.waitingRequest){i.requestQueue.push(n.index);return}if(i.waitingRequest=!0,n.cache)for(t=0;t<i.requests.length;t++)if(i.requests[t]&&i.requests[t].service===n.service&&i.requests[t].response){r=!0;for(u in n.data)if(n.data[u]!==i.requests[t].data[u]){r=!1;break}if(r){n.callback(i.requests[t].response),i.requests[n.index]=null;return}}n.post?s(n):a(n)}function l(n){i.waitingRequest=!1,n.block&&(i.blockRequests=!1),n.response.Items.length===1&&n.response.Items[0].Error!==t?n.error(n.response.Items[0].Description):n.success(n.response.Items),n.cache||(i.requests[n.index]=null),i.requestQueue.length&&h(i.requests[i.requestQueue.shift()])}function a(n){navigator.appName=="Microsoft Internet Explorer"?y(n):v(n)}function v(n){var t=new XMLHttpRequest,r=i.protocol+"//"+i.host+"/"+n.service+"/"+i.endpoint,u="",f;for(f in n.data)u+=(u?"&":"?")+f+"="+encodeURIComponent(n.data[f]);r+=u,t.onreadystatechange=function(){t.readyState==4&&n.callback(i.parseJSON(t.responseText))},r.length>i.limit?(n.post=!0,s(n)):(t.open("GET",r,!0),t.send())}function y(n){var t=i.create("script",{type:"text/javascript",async:"async"}),u=r.getElementsByTagName("head")[0],o=i.protocol+"//"+i.host+"/"+n.service+"/"+i.endpoint,f="",e;for(e in n.data)f+=(f?"&":"?")+e+"="+encodeURIComponent(n.data[e]);f+="&callback=pca.requests["+n.index+"].callback",t.src=o+f,t.onload=t.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(t.onload=t.onreadystatechange=null,u&&t.parentNode&&u.removeChild(t))},t.src.length>i.limit?(n.post=!0,s(n)):u.insertBefore(t,u.firstChild)}function s(n){navigator.appName=="Microsoft Internet Explorer"?w(n):p(n)}function p(n){var t=new XMLHttpRequest,f=i.protocol+"//"+i.host+"/"+n.service+"/"+i.endpoint,r="",u;for(u in n.data)r+=(r?"&":"")+u+"="+encodeURIComponent(n.data[u]);t.onreadystatechange=function(){t.readyState==4&&n.callback(i.parseJSON(t.responseText))},t.open("POST",f,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(r)}function w(n){function e(n,t){var i=r.createElement("input");i.name=n,i.value=t,u.appendChild(i)}var u=r.createElement("form"),t=r.createElement("iframe"),s=!1,o,f;u.method="POST",u.action=i.protocol+"//"+i.host+"/"+n.service+"/json.ws";for(o in n.data)e(o,n.data[o]);e("CallbackVariable","window.name"),e("CallbackWithScriptTags","true"),t.onload=function(){s?(n.callback({Items:i.parseJSON(t.contentWindow.name)}),r.body.removeChild(t)):(s=!0,t.contentWindow.location="about:blank")},t.style.display="none",r.body.appendChild(t),f=t.contentDocument||t.contentWindow.document,f.body?f.body.appendChild(u):f.appendChild(u),u.submit()}function u(t){return t==n||t==r||t==r.body}var i=n.pca=n.pca||{},r=n.document,f,e;i.protocol=(n.location||r.location).protocol=="https:"?"https:":"http:",i.host="services.postcodeanywhere.co.uk",i.endpoint="json3.ws",i.limit=2e3,i.synonyms=[{r:/\bN(?=\s)/,w:"NORTH"},{r:/\b(?:NE|NORTHEAST)(?=\s)/,w:"NORTH EAST"},{r:/\b(?:NW|NORTHWEST)(?=\s)/,w:"NORTH WEST"},{r:/\bS(?=\s)/,w:"SOUTH"},{r:/\b(?:SE|SOUTHEAST)(?=\s)/,w:"SOUTH EAST"},{r:/\b(?:SW|SOUTHWEST)(?=\s)/,w:"SOUTH WEST"},{r:/\bE(?=\s)/,w:"EAST"},{r:/\bW(?=\s)/,w:"WEST"},{r:/\bST(?=\s)/,w:"SAINT"}],i.diacritics=[{r:/[ÀÁÂÃ]/gi,w:"A"},{r:/Å/gi,w:"AA"},{r:/[ÆæÄ]/gi,w:"AE"},{r:/Ç/gi,w:"C"},{r:/Ð/gi,w:"DJ"},{r:/[ÈÉÊË]/gi,w:"E"},{r:/[ÌÍÏ]/gi,w:"I"},{r:/Ñ/gi,w:"N"},{r:/[ÒÓÔÕ]/gi,w:"O"},{r:/[ŒØÖ]/gi,w:"OE"},{r:/Š/gi,w:"SH"},{r:/ß/gi,w:"SS"},{r:/[ÙÚÛ]/gi,w:"U"},{r:/Ü/gi,w:"UE"},{r:/[ŸÝ]/gi,w:"ZH"},{r:/-/gi,w:" "},{r:/[.,]/gi,w:""}],i.hypertext=[{r:/&/g,w:"&amp;"},{r:/"/g,w:"&quot;"},{r:/'/g,w:"&#39;"},{r:/</g,w:"&lt;"},{r:/>/g,w:"&gt;"}],i.requests=[],i.requestQueue=[],i.waitingRequest=!1,i.blockRequests=!1,i.styleFixes=[],f=!1,e=[],i.Object=function(n){var t=n||this;return t.listeners={},t.listen=function(n,i){t.listeners[n]=t.listeners[n]||[],t.listeners[n].push(i)},t.ignore=function(n,i){if(t.listeners[n])for(var r=0;r<t.listeners[n].length;r++)if(t.listeners[n][r]===i){t.listeners[n].splice(r,1);break}},t.fire=function(n,i){var r,f,u;if(t.listeners[n])for(r=0;r<t.listeners[n].length;r++){for(f=[i],u=2;u<arguments.length;u++)f.push(arguments[u]);t.listeners[n][r].apply(t,f)}},t},i.Request=function(n,t,r,u){var f=new i.Object(this);f.service=n||"",f.data=t||{},f.success=r||function(){},f.error=u||function(){},f.response=null,f.cache=!!f.data.$cache,f.queue=!!f.data.$queue,f.block=!!f.data.$block,f.post=!!f.data.$post,f.callback=function(n){f.response=n,l(f)},f.index=i.requests.length,i.requests.push(f)},i.ready=function(n){var i,t;if(f){if(e.length)for(i=e,e=[],t=0;t<i.length;t++)i[t]();n&&n()}else typeof n=="function"&&e.push(n)},i.fetch=function(n,t,r,u){h(new i.Request(n,t,r,u))},i.loadScript=function(n,t){var u=i.create("script",{type:"text/javascript"}),f=r.getElementsByTagName("head")[0];u.onload=u.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(u.onload=u.onreadystatechange=null,(t||function(){})())},u.src=(~n.indexOf("/")?"":i.protocol+"//"+i.host+"/js/")+n,f.insertBefore(u,f.firstChild)},i.loadStyle=function(n,t){var u=i.create("link",{type:"text/css",rel:"stylesheet"}),f=r.getElementsByTagName("head")[0];u.onload=u.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(u.onload=u.onreadystatechange=null,(t||function(){})())},u.href=(~n.indexOf("/")?"":i.protocol+"//"+i.host+"/css/")+n,f.insertBefore(u,f.firstChild)},i.Item=function(n,t){var r=new i.Object(this),u="selected";return r.data=n,r.html=i.formatLine(n,t),r.tag=i.formatTag(r.html),r.element=i.create("div",{className:"item",innerHTML:r.html,title:i.removeHtml(r.html)}),r.visible=!0,r.highlight=function(){return i.addClass(r.element,u),r.fire("highlight"),r},r.mouseover=function(){r.fire("mouseover")},r.mouseout=function(){r.fire("mouseout")},r.lowlight=function(){return i.removeClass(r.element,u),r.fire("lowlight"),r},r.select=function(){return r.fire("select",r.data),r},r.hide=function(){return r.visible=!1,r.element.style.display="none",r.fire("hide"),r},r.show=function(){return r.visible=!0,r.element.style.display="",r.fire("show"),r},i.listen(r.element,"mouseover",r.mouseover),i.listen(r.element,"mouseout",r.mouseout),i.listen(r.element,"click",r.select),r},i.Collection=function(){var n=new i.Object(this);return n.items=[],n.selected=-1,n.count=0,n.add=function(t,r,u){function e(t){var f=new i.Item(t,r);f.listen("mouseover",function(){n.select(f)}),f.listen("select",u),n.items.push(f)}if(u=u||function(){},t.length)for(var f=0;f<t.length;f++)e(t[f]);else e(t);return n.count+=t.length,n.fire("add"),n},n.sort=function(t){return n.items.sort(function(n,i){return t?n.data[t]>i.data[t]?1:-1:n.tag>i.tag?1:-1}),n.fire("sort"),n},n.reverse=function(){return n.items.reverse(),n.fire("reverse"),n},n.filter=function(t){var r=i.formatTag(t),u=n.count;return n.count=0,n.all(function(t){~t.tag.indexOf(r)?(t.show(),n.count++):t.hide()}),u!=n.count&&n.fire("filter"),n},n.clear=function(){return n.items=[],n.count=0,n.selected=-1,n.fire("clear"),n},n.all=function(t){for(var i=0;i<n.items.length;i++)if(t(n.items[i])===!1)break;return n},n.select=function(t){return~n.selected&&n.items[n.selected].lowlight(),n.selected=n.index(t),~n.selected&&n.items[n.selected].highlight(),n.fire("select"),n},n.index=function(t){for(var i=0;i<n.items.length;i++)if(n.items[i]==t)return i;return-1},n.first=function(t){for(var i=0;i<n.items.length;i++)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return null},n.last=function(t){for(var i=n.items.length-1;i>=0;i--)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return null},n.next=function(t){for(var i=n.selected+1;i<n.items.length;i++)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return n.first()},n.previous=function(t){for(var i=n.selected-1;i>=0;i--)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return n.last()},n},i.List=function(){var t=new i.Object(this);return t.element=i.create("div",{className:"pca list"}),t.collection=new i.Collection,t.visible=!0,t.scroll={held:!1,moved:!1,origin:0,position:0,x:0,y:0,dx:0,dy:0},t.show=function(){return t.visible=!0,t.element.style.display="",t.fire("show"),t},t.hide=function(){return t.visible=!1,t.element.style.display="none",t.fire("hide"),t},t.draw=function(){return t.destroy(),t.collection.all(function(n){t.element.appendChild(n.element)}),t.fire("draw"),t},t.add=function(n,i,r){return t.collection.add(n,i,r),t.fire("add"),t.draw(),t},t.destroy=function(){while(t.element.childNodes&&t.element.childNodes.length)t.element.removeChild(t.element.childNodes[0]);return t},t.clear=function(){return t.collection.clear(),t.destroy(),t.fire("clear"),t},t.setScroll=function(n){return t.element.scrollTop=n,t.fire("scroll"),t},t.enableTouch=function(){function r(i){i=i||n.event,t.scroll.held=!0,t.scroll.moved=!1,t.scroll.origin=parseInt(t.scrollTop),t.scroll.y=parseInt(i.touches[0].pageY)}function u(){t.scroll.held=!1}function f(){t.scroll.held=!1}function e(r){t.scroll.held&&(r=r||n.event,i.smash(r),t.scroll.dy=t.scroll.y-parseInt(r.touches[0].pageY),t.scroll.position=t.scroll.origin+t.scroll.dy,t.setScroll(t.scroll.position),t.scroll.moved=!0)}return i.listen(t.element,"touchstart",r),i.listen(t.element,"touchmove",e),i.listen(t.element,"touchend",u),i.listen(t.element,"touchcancel",f),t},t.next=function(){var n=t.collection.next();return n&&(t.collection.select(n),t.scrollToItem(n)),t},t.previous=function(){var n=t.collection.previous();return n&&(t.collection.select(n),t.scrollToItem(n)),t},t.select=function(){return t.selectable()&&t.collection.items[t.collection.selected].select(),t},t.selectable=function(){return t.visible&&!!t.collection.items[t.collection.selected]},t.navigate=function(n){switch(n){case 40:return t.next(),!0;case 38:return t.previous(),!0;case 13:case 39:if(t.selectable())return t.select(),!0}return!1},t.scrollToItem=function(n){return t.scroll.position=t.element.scrollTop,n.element.offsetTop<t.scroll.position?(t.scroll.position=n.element.offsetTop,t.setScroll(t.scroll.position)):n.element.offsetTop+n.element.offsetHeight>t.scroll.position+t.element.offsetHeight&&(t.scroll.position=n.element.offsetTop+n.element.offsetHeight-t.element.offsetHeight,t.setScroll(t.scroll.position)),t},t.filter=function(n){var i=t.collection.count;return t.collection.filter(n),i!=t.collection.count&&t.fire("filter"),t},t},i.AutoComplete=function(t,f){var e=new i.Object(this);return e.options=f||{},e.element=i.create("div",{className:"autocomplete text"}),e.container=null,e.anchors=[],e.list=new i.List,e.fieldListeners=[],e.field=null,e.positionField=null,e.visible=!0,e.hover=!1,e.focused=!1,e.disabled=!1,e.header={element:i.create("div",{className:"pcaheader"}),headerText:i.create("div",{className:"pcamessage"}),init:function(){this.hide()},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),e.fire("header"),this},setText:function(n){return n=n||"",this.element.appendChild(this.headerText),typeof n=="string"?this.headerText.innerHTML=n:this.headerText.appendChild(n),e.fire("header"),this},clear:function(){return this.setContent(),e.fire("header"),this},show:function(){return this.element.style.display="",e.fire("header"),this},hide:function(){return this.element.style.display="none",e.fire("header"),this}},e.footer={element:i.create("div",{className:"pcafooter"}),init:function(){this.hide()},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),e.fire("footer"),this},show:function(){return this.element.style.display="",e.fire("footer"),this},hide:function(){return this.element.style.display="none",e.fire("footer"),this}},e.load=function(){if(t.length&&t.constructor==Array)for(var n=0;n<t.length;n++)e.attach(i.getElement(t[n]));else e.attach(i.getElement(t));return i.listen(e.element,"mouseover",function(){e.hover=!0}),i.listen(e.element,"mouseout",function(){e.hover=!1}),i.listen(r,"click",e.checkHide),r.documentMode&&r.documentMode<=7&&i.applyStyleFixes(".pca .autocomplete",{width:"250px"}),r.documentMode&&r.documentMode==5&&(i.applyStyleFixes(".pca .autocomplete .list",{width:"248px"}),i.applyStyleFixes(".pca .footer",{fontSize:"0pt"}),i.applyStyleFixes(".pca .flag",{fontSize:"0pt"})),e},e.attach=function(n){function t(n,t,r){i.listen(n,t,r),e.fieldListeners.push({field:n,event:t,action:r})}function f(n){function h(){e.field=n,s.appendChild(e.element),e.focus(),e.position(n),e.fire("move")}var r=i.create("table",{className:"anchor",cellPadding:0,cellSpacing:0}),o=[r.insertRow(0).insertCell(0),r.insertRow(1).insertCell(0)],f=i.create("div",{className:"pca"}),s=i.create("div",{className:"chain"});if(!n||!n.tagName){u();return}n.parentNode.insertBefore(f,n),f.appendChild(r),o[0].appendChild(n),o[1].appendChild(s),e.anchors.push(f),i.inputField(n)&&(t(n,"keyup",e.keyup),t(n,"focus",h),t(n,"blur",e.blur),t(n,"keypress",e.keypress)),t(n,"click",function(){e.click(n)}),t(n,"dblclick",function(){e.dblclick(n)}),t(n,"change",function(){e.change(n)})}function o(n){function r(){e.field=n,e.focus(),e.position(n),e.fire("move")}(u(),n&&n.tagName)&&(i.inputField(n)&&(t(n,"keyup",e.keyup),t(n,"focus",r),t(n,"blur",e.blur),t(n,"keypress",e.keypress)),t(n,"click",function(){e.click(n)}),t(n,"dblclick",function(){e.dblclick(n)}),t(n,"change",function(){e.change(n)}))}function u(){e.container||(e.container=i.create("div",{className:"pca"}),r.body.appendChild(e.container)),e.container.appendChild(e.element)}e.options.force?f(n):o(n)},e.position=function(t){var r=i.getPosition(t),c=i.getSize(t),a=i.getTopOffsetParent(t),s=i.getParentScroll(t),h=i.getSize(e.element),v=i.getSize(n),f=i.getScroll(n),o=!u(a),l;return r.top-(o?0:f.top)>h.height&&r.top+h.height-(o?0:f.top)>v.height?e.options.force?e.element.style.top=-(h.height+c.height+2)+"px":(e.element.style.top=r.top-s.top-h.height+(o?f.top:0)+"px",e.element.style.left=r.left-s.left+(o?f.left:0)+"px"):e.options.force?e.element.style.top="auto":(e.element.style.top=r.top-s.top+c.height+1+(o?f.top:0)+"px",e.element.style.left=r.left-s.left+(o?f.left:0)+"px"),l=parseInt(i.getStyle(e.element,"borderLeftWidth"))+parseInt(i.getStyle(e.element,"borderRightWidth"))||0,e.element.style.minWidth=i.getSize(t).width-l+"px",e.positionField=t,e},e.reposition=function(){return e.positionField&&e.position(e.positionField),e},e.show=function(){return e.disabled||(e.visible=!0,e.element.style.display="",e.list.collection.count?e.list.show():e.list.hide(),e.setScroll(0),e.reposition(),e.fire("show")),e},e.showAll=function(){e.list.filter(""),e.show()},e.hide=function(){return e.visible=!1,e.element.style.display="none",e.fire("hide"),e},e.focus=function(){e.focused=!0,e.show(),e.fire("focus")},e.blur=function(){e.focused=!1,e.checkHide(),e.fire("blur")},e.checkHide=function(){return!e.visible||e.focused||e.hover||e.hide(),e},e.keyup=function(t){var r=n.event?n.event.keyCode:t.which;r==27?(e.hide(),e.fire("escape")):r==8||r==46?(e.filter(),e.fire("delete")):r!=0&&r<=46?e.visible&&e.list.navigate(r)?i.smash(t):(r==38||r==40)&&e.filter():e.visible&&e.filter(),e.fire("keyup",r)},e.keypress=function(t){var r=n.event?n.event.keyCode:t.which;e.visible&&r==13&&e.list.selectable()&&i.smash(t)},e.click=function(n){e.fire("click",n)},e.dblclick=function(n){e.fire("dblclick",n)},e.change=function(n){e.fire("change",n)},e.add=function(n,t,i){return e.list.add(n,t,i),e},e.clear=function(){return e.list.clear(),e},e.setScroll=function(n){return e.list.setScroll(n),e},e.setWidth=function(n){return e.element.style.width=n+"px",e},e.filter=function(n){return e.list.filter(n||i.getValue(e.field)),e.list.collection.count?e.show():e.hide(),e},e.destroy=function(){e.container&&r.body.removeChild(e.container),i.ignore(r,"click",e.checkHide);for(var n=0;n<e.fieldListeners.length;n++)i.ignore(e.fieldListeners[n].field,e.fieldListeners[n].event,e.fieldListeners[n].action)},e.element.appendChild(e.header.element),e.element.appendChild(e.list.element),e.element.appendChild(e.footer.element),e.header.init(),e.footer.init(),t&&e.load(t),e.hide(),e},i.Modal=function(){var t=new i.Object(this),u;return t.element=i.create("div",{className:"modal"}),t.border=i.create("div",{className:"border"}),t.frame=i.create("div",{className:"frame"}),t.content=i.create("div",{className:"content text"}),t.mask=i.create("div",{className:"fullscreen mask"}),t.header={element:i.create("div",{className:"pcaheader"}),headerText:i.create("div",{className:"pcatitle"}),init:function(){this.setText()},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),t.fire("header"),this},setText:function(n){return n=n||"",this.element.appendChild(this.headerText),typeof n=="string"?this.headerText.innerHTML=n:this.headerText.appendChild(n),t.fire("header"),this},show:function(){return this.element.style.display="",t.fire("header"),this},hide:function(){return this.element.style.display="none",t.fire("header"),this}},t.setContent=function(n){return typeof n=="string"?t.content.innerHTML=n:t.content.appendChild(n),t.fire("change"),t},t.centre=function(){var r=i.getSize(n),u=i.getSize(t.element);return t.element.style.top=r.height/2-u.height/2+"px",t.element.style.left=r.width/2-u.width/2+"px",t},t.show=function(){return t.element.style.display="",t.mask.style.display="",t.centre(),t.fire("show"),t},t.hide=function(){return t.element.style.display="none",t.mask.style.display="none",t.fire("hide"),t},i.listen(t.mask,"click",t.hide),t.element.appendChild(t.border),t.element.appendChild(t.frame),t.frame.appendChild(t.header.element),t.frame.appendChild(t.content),t.header.init(),u=i.create("div",{className:"pca"}),u.appendChild(t.mask),u.appendChild(t.element),r.body.appendChild(u),t.hide(),t},i.formatLine=function(n,t){return t.replace(/\{(\w+)\}/g,function(t,i){return(typeof n[i]=="function"?n[i]():n[i])||""})},i.formatTag=function(n){return n?i.replaceList(i.replaceList(i.removeHtml(n.toUpperCase()),i.diacritics),i.synonyms):""},i.formatTagWords=function(n){return i.formatTag(n).split(" ")},i.formatCamel=function(n,t){function i(n,i,r){return i+t+r}return t=t||" ",n=n.replace(/([a-z])([A-Z0-9])/g,i),n=n.replace(/([0-9])([A-Z])/g,i),n.replace(/([A-Z])([A-Z][a-z])/g,i)},i.replaceList=function(n,t){for(var i=0;i<t.length;i++)n=n.toString().replace(t[i].r,t[i].w);return n},i.removeHtml=function(n){return n.replace(/<(?:.|\s)*?>+/g,"")},i.escapeHtml=function(n){return i.replaceList(n,i.hypertext)},i.validId=function(n){return/[a-z0-9-_:\.\[\]]+/gi.exec(n)},i.trimSpaces=function(n){return n.replace(/^\s+|\s(?=\s)|\s$/g,"")},i.tidy=function(n,t){t=t.replace("\\","\\\\");var i=new RegExp("^"+t+"+|"+t+"(?="+t+")|"+t+"$","gi");return n.replace(i,"")},i.getText=function(n){return/[a-zA-Z][a-zA-Z\s]+[a-zA-Z]/.exec(n)},i.getNumber=function(n){return/\d+/.exec(n)},i.parseJSON=function(n){return n&&/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?typeof JSON!="undefined"?JSON.parse(n):eval(n):{}},i.parseJSONDate=function(n){return new Date(parseInt(i.getNumber(n)))},i.containsWord=function(n,t){var i=new RegExp("\\b"+t+"\\b","gi");return i.test(n)},i.removeWord=function(n,t){var i=new RegExp("\\s?\\b"+t+"\\b","gi");return n.replace(i,"")},i.merge=function(n,t){for(var i in n)t[i]||(t[i]=n[i])},i.getElement=function(n,t){var u,f;if(!n)return null;if(n.tagName)return n;if(t=i.getElement(t)||r,typeof n=="string"){if(u=t.getElementById?t.getElementById(n):null,u)return u;if(f=t.getElementsByName?t.getElementsByName(n):null,f.length)return f[0]}return i.getElementByRegex(n,t)},i.getElementByRegex=function(n,t){var e,u,f;if(typeof n=="string")try{n=new RegExp(n)}catch(o){return null}if(typeof n=="object"&&n.constructor==RegExp)for(t=i.getElement(t)||r,e=t.getElementsByTagName("*"),u=0;u<e.length;u++)if(f=e[u],f.id&&n.test(f.id))return f;return null},i.getValue=function(n){if(n=i.getElement(n)){if(n.tagName=="INPUT"||n.tagName=="TEXTAREA")return n.type=="checkbox"?n.checked:n.value;if(n.tagName=="SELECT")return n.options[n.selectedIndex].value;if(n.tagName=="DIV"||n.tagName=="SPAN"||n.tagName=="TD")return n.innerHTML}return""},i.setValue=function(n,t){var u,f,r;if((t||t=="")&&(n=i.getElement(n)))if(u=t.toString(),f=u.toLowerCase(),n.tagName=="INPUT"||n.tagName=="TEXTAREA")n.type=="checkbox"?n.checked=typeof t=="boolean"&&t||f=="true":n.value=u;else if(n.tagName=="SELECT"){for(r=0;r<n.options.length;r++)if(n.options[r].value.toLowerCase()==f||n.options[r].text.toLowerCase()==f){n.selectedIndex=r;return}}else(n.tagName=="DIV"||n.tagName=="SPAN"||n.tagName=="TD")&&(n.innerHTML=u.replace(/\n/g,"<br/>"))},i.inputField=function(n){return(n=i.getElement(n))?n.tagName&&(n.tagName=="INPUT"||n.tagName=="TEXTAREA")&&n.type&&(n.type=="text"||n.type=="textarea"):!1},i.selectList=function(n){return(n=i.getElement(n))?n.tagName&&n.tagName=="SELECT":!1},i.checkBox=function(n){return(n=i.getElement(n))?n.tagName&&n.tagName=="INPUT"&&n.type&&n.type=="checkbox":!1},i.clear=function(n){i.setValue(n,"")},i.getPosition=function(t){var e={left:0,top:0},r,f;if(t=i.getElement(t)){if(!t.tagName)return e;if(typeof t.getBoundingClientRect!="undefined"){var o=t.getBoundingClientRect(),s=!u(i.getTopOffsetParent(t)),h=i.getScroll(n),c=i.getParentScroll(t);return{left:o.left+c.left+(s?0:h.left),top:o.top+c.top+(s?0:h.top)}}r=0,f=0;do r+=t.offsetLeft,f+=t.offsetTop;while(t=t.offsetParent);return{left:r,top:f}}return e},i.getScroll=function(n){return{left:n.scrollX||n.scrollLeft||(u(n)?r.documentElement.scrollLeft||r.body.scrollLeft:0),top:n.scrollY||n.scrollTop||(u(n)?r.documentElement.scrollTop||r.body.scrollTop:0)}},i.getSize=function(n){return{height:n.offsetHeight||n.innerHeight||(u(n)?r.documentElement.clientHeight||r.body.clientHeight:0),width:n.offsetWidth||n.innerWidth||(u(n)?r.documentElement.clientWidth||r.body.clientWidth:0)}},i.getParentScroll=function(n){var f={left:0,top:0},t,r;if(n=i.getElement(n)){if(!n.tagName||!(n=n.parentNode))return f;t=0,r=0;do{if(u(n))break;t+=n.scrollLeft,r+=n.scrollTop}while(n=n.parentNode);return{left:t,top:r}}return f},i.getTopOffsetParent=function(n){while(n.offsetParent)if(n=n.offsetParent,i.getStyle(n,"position")=="fixed")break;return n},i.getStyle=function(t,i){return((n.getComputedStyle?n.getComputedStyle(t):t.currentStyle)||{})[i]||""},i.addClass=function(n,t){(n=i.getElement(n))&&(i.containsWord(n.className||"",t)||(n.className+=(n.className?" ":"")+t))},i.removeClass=function(n,t){(n=i.getElement(n))&&(n.className=i.removeWord(n.className,t))},i.applyStyleFixes=function(n,t){for(var e,o,f,s,h,u=0;u<r.styleSheets.length;u++)for(e=r.styleSheets[u],o=e.rules||e.cssRules||[],f=0;f<o.length;f++)if(s=o[f],s.selectorText.toLowerCase()==n)for(h in t)s.style[h]=t[h];i.styleFixes.push({selectorText:n,fixes:t})},i.reapplyStyleFixes=function(){var t=i.styleFixes,n;for(i.styleFixes=[],n=0;n<t.length;n++)i.applyStyleFixes(t[n].selectorText,t[n].fixes)},i.createStyleSheet=function(n){r.createStyleSheet?r.createStyleSheet().cssText=n:r.head.appendChild(i.create("style",{type:"text/css",innerHTML:n}))},i.create=function(n,t,i){var u=r.createElement(n),f;for(f in t||{})u[f]=t[f];return i&&(u.style.cssText=i),u},i.listen=function(t,i,r,u){n.addEventListener?t.addEventListener(i,r,u):t.attachEvent("on"+i,r)},i.fire=function(n,t){if(r.createEvent){var i=r.createEvent("HTMLEvents");return i.initEvent(t,!0,!0),!n.dispatchEvent(i)}return n.fireEvent("on"+t,r.createEventObject())},i.ignore=function(t,i,r){n.removeEventListener?t.removeEventListener(i,r):t.detachEvent("on"+i,r)},i.smash=function(t){var i=t||n.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,i.preventDefault?i.preventDefault():i.returnValue=!1},i.debug=function(n){i.setValue("pcadebug",n),console&&console.log(n)},c()})(window),function(){var n=window.pca=window.pca||{};n.countries=[{iso2:"AF",iso3:"AFG",name:"Afghanistan",flag:1},{iso2:"AX",iso3:"ALA",name:"Åland Islands",flag:220},{iso2:"AL",iso3:"ALB",name:"Albania",flag:2},{iso2:"DZ",iso3:"DZA",name:"Algeria",flag:3},{iso2:"AS",iso3:"ASM",name:"American Samoa",flag:4},{iso2:"AD",iso3:"AND",name:"Andorra",flag:5},{iso2:"AO",iso3:"AGO",name:"Angola",flag:6},{iso2:"AI",iso3:"AIA",name:"Anguilla",flag:7},{iso2:"AQ",iso3:"ATA",name:"Antarctica",flag:0},{iso2:"AG",iso3:"ATG",name:"Antigua and Barbuda",flag:8},{iso2:"AR",iso3:"ARG",name:"Argentina",flag:9},{iso2:"AM",iso3:"ARM",name:"Armenia",flag:10},{iso2:"AW",iso3:"ABW",name:"Aruba",flag:11},{iso2:"AU",iso3:"AUS",name:"Australia",flag:12},{iso2:"AT",iso3:"AUT",name:"Austria",flag:13},{iso2:"AZ",iso3:"AZE",name:"Azerbaijan",flag:14},{iso2:"BS",iso3:"BHS",name:"Bahamas",flag:15},{iso2:"BH",iso3:"BHR",name:"Bahrain",flag:16},{iso2:"BD",iso3:"BGD",name:"Bangladesh",flag:17},{iso2:"BB",iso3:"BRB",name:"Barbados",flag:18},{iso2:"BY",iso3:"BLR",name:"Belarus",flag:19},{iso2:"BE",iso3:"BEL",name:"Belgium",flag:20},{iso2:"BZ",iso3:"BLZ",name:"Belize",flag:21},{iso2:"BJ",iso3:"BEN",name:"Benin",flag:22},{iso2:"BM",iso3:"BMU",name:"Bermuda",flag:23},{iso2:"BT",iso3:"BTN",name:"Bhutan",flag:24},{iso2:"BO",iso3:"BOL",name:"Bolivia, Plurinational State Of",flag:25},{iso2:"BQ",iso3:"BES",name:"Bonaire, Saint Eustatius and Saba",flag:0},{iso2:"BA",iso3:"BIH",name:"Bosnia and Herzegovina",flag:26},{iso2:"BW",iso3:"BWA",name:"Botswana",flag:27},{iso2:"BV",iso3:"BVT",name:"Bouvet Island",flag:0},{iso2:"BR",iso3:"BRA",name:"Brazil",flag:28},{iso2:"IO",iso3:"IOT",name:"British Indian Ocean Territory",flag:29},{iso2:"BN",iso3:"BRN",name:"Brunei Darussalam",flag:0},{iso2:"BG",iso3:"BGR",name:"Bulgaria",flag:31},{iso2:"BF",iso3:"BFA",name:"Burkina Faso",flag:32},{iso2:"BI",iso3:"BDI",name:"Burundi",flag:34},{iso2:"KH",iso3:"KHM",name:"Cambodia",flag:35},{iso2:"CM",iso3:"CMR",name:"Cameroon",flag:36},{iso2:"CA",iso3:"CAN",name:"Canada",flag:37},{iso2:"CV",iso3:"CPV",name:"Cape Verde",flag:38},{iso2:"KY",iso3:"CYM",name:"Cayman Islands",flag:39},{iso2:"CF",iso3:"CAF",name:"Central African Republic",flag:40},{iso2:"TD",iso3:"TCD",name:"Chad",flag:41},{iso2:"CL",iso3:"CHL",name:"Chile",flag:42},{iso2:"CN",iso3:"CHN",name:"China",flag:43},{iso2:"CX",iso3:"CXR",name:"Christmas Island",flag:0},{iso2:"CC",iso3:"CCK",name:"Cocos (Keeling) Islands",flag:0},{iso2:"CO",iso3:"COL",name:"Colombia",flag:44},{iso2:"KM",iso3:"COM",name:"Comoros",flag:45},{iso2:"CG",iso3:"COG",name:"Congo",flag:0},{iso2:"CD",iso3:"COD",name:"Congo, the Democratic Republic of the",flag:46},{iso2:"CK",iso3:"COK",name:"Cook Islands",flag:47},{iso2:"CR",iso3:"CRI",name:"Costa Rica",flag:48},{iso2:"CI",iso3:"CIV",name:"Côte D'ivoire",flag:49},{iso2:"HR",iso3:"HRV",name:"Croatia",flag:50},{iso2:"CU",iso3:"CUB",name:"Cuba",flag:51},{iso2:"CW",iso3:"CUW",name:"Curaçao",flag:0},{iso2:"CY",iso3:"CYP",name:"Cyprus",flag:52},{iso2:"CZ",iso3:"CZE",name:"Czech Republic",flag:53},{iso2:"DK",iso3:"DNK",name:"Denmark",flag:54},{iso2:"DJ",iso3:"DJI",name:"Djibouti",flag:55},{iso2:"DM",iso3:"DMA",name:"Dominica",flag:56},{iso2:"DO",iso3:"DOM",name:"Dominican Republic",flag:57},{iso2:"EC",iso3:"ECU",name:"Ecuador",flag:61},{iso2:"EG",iso3:"EGY",name:"Egypt",flag:58},{iso2:"SV",iso3:"SLV",name:"El Salvador",flag:59},{iso2:"GQ",iso3:"GNQ",name:"Equatorial Guinea",flag:62},{iso2:"ER",iso3:"ERI",name:"Eritrea",flag:63},{iso2:"EE",iso3:"EST",name:"Estonia",flag:64},{iso2:"ET",iso3:"ETH",name:"Ethiopia",flag:65},{iso2:"FK",iso3:"FLK",name:"Falkland Islands (Malvinas)",flag:66},{iso2:"FO",iso3:"FRO",name:"Faroe Islands",flag:67},{iso2:"FJ",iso3:"FJI",name:"Fiji",flag:68},{iso2:"FI",iso3:"FIN",name:"Finland",flag:69},{iso2:"FR",iso3:"FRA",name:"France",flag:70},{iso2:"GF",iso3:"GUF",name:"French Guiana",flag:0},{iso2:"PF",iso3:"PYF",name:"French Polynesia",flag:71},{iso2:"TF",iso3:"ATF",name:"French Southern Territories",flag:0},{iso2:"GA",iso3:"GAB",name:"Gabon",flag:72},{iso2:"GM",iso3:"GMB",name:"Gambia",flag:73},{iso2:"GE",iso3:"GEO",name:"Georgia",flag:74},{iso2:"DE",iso3:"DEU",name:"Germany",flag:75},{iso2:"GH",iso3:"GHA",name:"Ghana",flag:76},{iso2:"GI",iso3:"GIB",name:"Gibraltar",flag:77},{iso2:"GR",iso3:"GRC",name:"Greece",flag:79},{iso2:"GL",iso3:"GRL",name:"Greenland",flag:80},{iso2:"GD",iso3:"GRD",name:"Grenada",flag:81},{iso2:"GP",iso3:"GLP",name:"Guadeloupe",flag:0},{iso2:"GU",iso3:"GUM",name:"Guam",flag:82},{iso2:"GT",iso3:"GTM",name:"Guatemala",flag:83},{iso2:"GG",iso3:"GGY",name:"Guernsey",flag:84},{iso2:"GN",iso3:"GIN",name:"Guinea",flag:85},{iso2:"GW",iso3:"GNB",name:"Guinea-Bissau",flag:86},{iso2:"GY",iso3:"GUY",name:"Guyana",flag:87},{iso2:"HT",iso3:"HTI",name:"Haiti",flag:88},{iso2:"HM",iso3:"HMD",name:"Heard Island and McDonald Islands",flag:0},{iso2:"VA",iso3:"VAT",name:"Holy See (Vatican City State)",flag:0},{iso2:"HN",iso3:"HND",name:"Honduras",flag:89},{iso2:"HK",iso3:"HKG",name:"Hong Kong",flag:90},{iso2:"HU",iso3:"HUN",name:"Hungary",flag:91},{iso2:"IS",iso3:"ISL",name:"Iceland",flag:92},{iso2:"IN",iso3:"IND",name:"India",flag:93},{iso2:"ID",iso3:"IDN",name:"Indonesia",flag:94},{iso2:"IR",iso3:"IRN",name:"Iran, Islamic Republic Of",flag:95},{iso2:"IQ",iso3:"IRQ",name:"Iraq",flag:96},{iso2:"IE",iso3:"IRL",name:"Ireland",flag:97},{iso2:"IM",iso3:"IMN",name:"Isle of Man",flag:98},{iso2:"IL",iso3:"ISR",name:"Israel",flag:99},{iso2:"IT",iso3:"ITA",name:"Italy",flag:100},{iso2:"JM",iso3:"JAM",name:"Jamaica",flag:101},{iso2:"JP",iso3:"JPN",name:"Japan",flag:102},{iso2:"JE",iso3:"JEY",name:"Jersey",flag:103},{iso2:"JO",iso3:"JOR",name:"Jordan",flag:104},{iso2:"KZ",iso3:"KAZ",name:"Kazakhstan",flag:105},{iso2:"KE",iso3:"KEN",name:"Kenya",flag:106},{iso2:"KI",iso3:"KIR",name:"Kiribati",flag:107},{iso2:"KP",iso3:"PRK",name:"Korea, Democratic People's Republic of",flag:149},{iso2:"KR",iso3:"KOR",name:"Korea, Republic of",flag:185},{iso2:"KW",iso3:"KWT",name:"Kuwait",flag:108},{iso2:"KG",iso3:"KGZ",name:"Kyrgyzstan",flag:109},{iso2:"LA",iso3:"LAO",name:"Lao people's Democratic Republic",flag:0},{iso2:"LV",iso3:"LVA",name:"Latvia",flag:110},{iso2:"LB",iso3:"LBN",name:"Lebanon",flag:111},{iso2:"LS",iso3:"LSO",name:"Lesotho",flag:112},{iso2:"LR",iso3:"LBR",name:"Liberia",flag:113},{iso2:"LY",iso3:"LBY",name:"Libya",flag:114},{iso2:"LI",iso3:"LIE",name:"Liechtenstein",flag:115},{iso2:"LT",iso3:"LTU",name:"Lithuania",flag:116},{iso2:"LU",iso3:"LUX",name:"Luxembourg",flag:117},{iso2:"MO",iso3:"MAC",name:"Macao",flag:118},{iso2:"MK",iso3:"MKD",name:"Macedonia, the Former Yugoslav Republic of",flag:119},{iso2:"MG",iso3:"MDG",name:"Madagascar",flag:120},{iso2:"MW",iso3:"MWI",name:"Malawi",flag:121},{iso2:"MY",iso3:"MYS",name:"Malaysia",flag:122},{iso2:"MV",iso3:"MDV",name:"Maldives",flag:123},{iso2:"ML",iso3:"MLI",name:"Mali",flag:124},{iso2:"MT",iso3:"MLT",name:"Malta",flag:125},{iso2:"MH",iso3:"MHL",name:"Marshall Islands",flag:126},{iso2:"MQ",iso3:"MTQ",name:"Martinique",flag:127},{iso2:"MR",iso3:"MRT",name:"Mauritania",flag:128},{iso2:"MU",iso3:"MUS",name:"Mauritius",flag:129},{iso2:"YT",iso3:"MYT",name:"Mayotte",flag:0},{iso2:"MX",iso3:"MEX",name:"Mexico",flag:130},{iso2:"FM",iso3:"FSM",name:"Micronesia, Federated States of",flag:131},{iso2:"MD",iso3:"MDA",name:"Moldova, Republic of",flag:132},{iso2:"MC",iso3:"MCO",name:"Monaco",flag:133},{iso2:"MN",iso3:"MNG",name:"Mongolia",flag:134},{iso2:"ME",iso3:"MNE",name:"Montenegro",flag:0},{iso2:"MS",iso3:"MSR",name:"Montserrat",flag:135},{iso2:"MA",iso3:"MAR",name:"Morocco",flag:136},{iso2:"MZ",iso3:"MOZ",name:"Mozambique",flag:137},{iso2:"MM",iso3:"MMR",name:"Myanmar",flag:33},{iso2:"NA",iso3:"NAM",name:"Namibia",flag:138},{iso2:"NR",iso3:"NRU",name:"Nauru",flag:139},{iso2:"NP",iso3:"NPL",name:"Nepal",flag:140},{iso2:"NL",iso3:"NLD",name:"Netherlands",flag:141},{iso2:"NC",iso3:"NCL",name:"New Caledonia",flag:0},{iso2:"NZ",iso3:"NZL",name:"New Zealand",flag:142},{iso2:"NI",iso3:"NIC",name:"Nicaragua",flag:143},{iso2:"NE",iso3:"NER",name:"Niger",flag:144},{iso2:"NG",iso3:"NGA",name:"Nigeria",flag:145},{iso2:"NU",iso3:"NIU",name:"Niue",flag:146},{iso2:"NF",iso3:"NFK",name:"Norfolk Island",flag:147},{iso2:"MP",iso3:"MNP",name:"Northern Mariana Islands",flag:148},{iso2:"NO",iso3:"NOR",name:"Norway",flag:150},{iso2:"OM",iso3:"OMN",name:"Oman",flag:151},{iso2:"PK",iso3:"PAK",name:"Pakistan",flag:152},{iso2:"PW",iso3:"PLW",name:"Palau",flag:153},{iso2:"PS",iso3:"PSE",name:"Palestine, State of",flag:0},{iso2:"PA",iso3:"PAN",name:"Panama",flag:154},{iso2:"PG",iso3:"PNG",name:"Papua New Guinea",flag:155},{iso2:"PY",iso3:"PRY",name:"Paraguay",flag:156},{iso2:"PE",iso3:"PER",name:"Peru",flag:157},{iso2:"PH",iso3:"PHL",name:"Philippines",flag:158},{iso2:"PN",iso3:"PCN",name:"Pitcairn",flag:0},{iso2:"PL",iso3:"POL",name:"Poland",flag:159},{iso2:"PT",iso3:"PRT",name:"Portugal",flag:160},{iso2:"PR",iso3:"PRI",name:"Puerto Rico",flag:161},{iso2:"QA",iso3:"QAT",name:"Qatar",flag:162},{iso2:"RE",iso3:"REU",name:"Réunion",flag:0},{iso2:"RO",iso3:"ROU",name:"Romania",flag:163},{iso2:"RU",iso3:"RUS",name:"Russian Federation",flag:164},{iso2:"RW",iso3:"RWA",name:"Rwanda",flag:165},{iso2:"BL",iso3:"BLM",name:"Saint Barthélemy",flag:0},{iso2:"SH",iso3:"SHN",name:"Saint Helena, Ascension and Tristan da Cunha",flag:166},{iso2:"KN",iso3:"KNA",name:"Saint Kitts and Nevis",flag:167},{iso2:"LC",iso3:"LCA",name:"Saint Lucia",flag:168},{iso2:"MF",iso3:"MAF",name:"Saint Martin (French part)",flag:0},{iso2:"PM",iso3:"SPM",name:"Saint Pierre and Miquelon",flag:169},{iso2:"VC",iso3:"VCT",name:"Saint Vincent and the Grenadines",flag:170},{iso2:"WS",iso3:"WSM",name:"Samoa",flag:171},{iso2:"SM",iso3:"SMR",name:"San Marino",flag:172},{iso2:"ST",iso3:"STP",name:"Sao Tome and Principe",flag:173},{iso2:"SA",iso3:"SAU",name:"Saudi Arabia",flag:174},{iso2:"SN",iso3:"SEN",name:"Senegal",flag:175},{iso2:"RS",iso3:"SRB",name:"Serbia",flag:0},{iso2:"SC",iso3:"SYC",name:"Seychelles",flag:176},{iso2:"SL",iso3:"SLE",name:"Sierra Leone",flag:177},{iso2:"SG",iso3:"SGP",name:"Singapore",flag:178},{iso2:"SX",iso3:"SXM",name:"Sint Maarten (Dutch part)",flag:0},{iso2:"SK",iso3:"SVK",name:"Slovakia",flag:179},{iso2:"SI",iso3:"SVN",name:"Slovenia",flag:180},{iso2:"SB",iso3:"SLB",name:"Solomon Islands",flag:181},{iso2:"SO",iso3:"SOM",name:"Somalia",flag:182},{iso2:"ZA",iso3:"ZAF",name:"South Africa",flag:183},{iso2:"GS",iso3:"SGS",name:"South Georgia and the South Sandwich Islands",flag:184},{iso2:"SS",iso3:"SSD",name:"South Sudan",flag:0},{iso2:"ES",iso3:"ESP",name:"Spain",flag:186},{iso2:"LK",iso3:"LKA",name:"Sri Lanka",flag:187},{iso2:"SD",iso3:"SDN",name:"Sudan",flag:188},{iso2:"SR",iso3:"SUR",name:"Suriname",flag:189},{iso2:"SJ",iso3:"SJM",name:"Svalbard and Jan Mayen",flag:190},{iso2:"SZ",iso3:"SWZ",name:"Swaziland",flag:191},{iso2:"SE",iso3:"SWE",name:"Sweden",flag:192},{iso2:"CH",iso3:"CHE",name:"Switzerland",flag:193},{iso2:"SY",iso3:"SYR",name:"Syrian Arab Republic",flag:0},{iso2:"TW",iso3:"TWN",name:"Taiwan, Province Of China",flag:194},{iso2:"TJ",iso3:"TJK",name:"Tajikistan",flag:195},{iso2:"TZ",iso3:"TZA",name:"Tanzania, United Republic Of",flag:196},{iso2:"TH",iso3:"THA",name:"Thailand",flag:197},{iso2:"TL",iso3:"TLS",name:"Timor-Leste",flag:0},{iso2:"TG",iso3:"TGO",name:"Togo",flag:198},{iso2:"TK",iso3:"TKL",name:"Tokelau",flag:0},{iso2:"TO",iso3:"TON",name:"Tonga",flag:199},{iso2:"TT",iso3:"TTO",name:"Trinidad and Tobago",flag:200},{iso2:"TN",iso3:"TUN",name:"Tunisia",flag:201},{iso2:"TR",iso3:"TUR",name:"Turkey",flag:202},{iso2:"TM",iso3:"TKM",name:"Turkmenistan",flag:203},{iso2:"TC",iso3:"TCA",name:"Turks and Caicos Islands",flag:204},{iso2:"TV",iso3:"TUV",name:"Tuvalu",flag:205},{iso2:"UG",iso3:"UGA",name:"Uganda",flag:206},{iso2:"UA",iso3:"UKR",name:"Ukraine",flag:207},{iso2:"AE",iso3:"ARE",name:"United Arab Emirates",alternates:["UAE"],flag:208},{iso2:"GB",iso3:"GBR",name:"United Kingdom",alternates:["Britain","England","Great Britain","Northern Ireland","Scotland","UK","Wales"],flag:78},{iso2:"US",iso3:"USA",name:"United States",alternates:["America","United States of America"],flag:210},{iso2:"UM",iso3:"UMI",name:"United States Minor Outlying Islands",flag:0},{iso2:"UY",iso3:"URY",name:"Uruguay",flag:209},{iso2:"UZ",iso3:"UZB",name:"Uzbekistan",flag:211},{iso2:"VU",iso3:"VUT",name:"Vanuatu",flag:212},{iso2:"VE",iso3:"VEN",name:"Venezuela, Bolivarian Republic Of",flag:213},{iso2:"VN",iso3:"VNM",name:"Viet Nam",flag:214},{iso2:"VG",iso3:"VGB",name:"Virgin Islands, British",flag:30},{iso2:"VI",iso3:"VIR",name:"Virgin Islands, U.S.",flag:215},{iso2:"WF",iso3:"WLF",name:"Wallis and Futuna",flag:216},{iso2:"EH",iso3:"ESH",name:"Western Sahara",flag:0},{iso2:"YE",iso3:"YEM",name:"Yemen",flag:217},{iso2:"ZM",iso3:"ZMB",name:"Zambia",flag:218},{iso2:"ZW",iso3:"ZWE",name:"Zimbabwe",flag:219}],n.countryNameType={NAME:0,ISO2:1,ISO3:2},n.CountryList=function(t,i){var r=new n.Object(this);r.fields=t||[],r.options=i||{},r.options.defaultCode=r.options.defaultCode||"",r.options.value=r.options.value||"",r.options.codesList=r.options.codesList||"",r.options.fillOthers=r.options.fillOthers||!1,r.options.list=r.options.list||{},r.options.populate=typeof r.options.populate=="boolean"?r.options.populate:!0,r.options.prepopulate=typeof r.options.prepopulate=="boolean"?r.options.prepopulate:!0,r.options.nameType=r.options.nameType||n.countryNameType.NAME,r.options.valueType=r.options.valueType||n.countryNameType.ISO3,r.template="<div class='pcaflag'><\/div><div class='flaglabel'>{name}<\/div>",r.autocomplete=new n.AutoComplete(r.fields,r.options.list),r.country=null,r.textChanged=!1,r.load=function(){function c(t){r.setCountry(n.getValue(t)),r.textChanged=!1}var o,t,f,s,i,u,h,e;if(n.addClass(r.autocomplete.element,"countrylist"),r.options.codesList){for(o=r.options.codesList.replace(/\s/g,"").split(","),t=[],r.autocomplete.clear(),f=0;f<o.length;f++)for(s=o[f].toString().toUpperCase(),i=0;i<n.countries.length;i++)if(n.countries[i].iso2==s||n.countries[i].iso3==s){t.push(n.countries[i]);break}if(r.options.fillOthers)for(u=0;u<n.countries.length;u++){for(h=!1,e=0;e<t.length;e++)n.countries[u].iso3==t[e].iso3&&(h=!0);h||t.push(n.countries[u])}r.autocomplete.clear().add(t,r.template,r.change)}else r.autocomplete.clear().add(n.countries,r.template,r.change);r.autocomplete.list.collection.all(function(t){r.setFlagPosition(t.element.firstChild,t.data.flag),t.tag+=" "+n.formatTag(t.data.iso3+(t.data.alternates?" "+t.data.alternates.join(" "):""))}),r.autocomplete.listen("focus",function(){r.autocomplete.showAll()}),r.autocomplete.listen("change",function(n){r.autocomplete.visible?r.textChanged=!0:c(n)}),r.autocomplete.listen("hide",function(){r.textChanged&&c(r.autocomplete.field)}),r.options.value&&(r.country=r.find(r.options.value)),!r.country&&r.options.defaultCode&&(r.country=r.find(r.options.defaultCode)),r.country=r.country||r.first(),r.fire("load")},r.getName=function(t){switch(r.options.nameType){case n.countryNameType.NAME:return(t||r.country).name;case n.countryNameType.ISO2:return(t||r.country).iso2;case n.countryNameType.ISO3:return(t||r.country).iso3}return(t||r.country).name},r.getValue=function(t){switch(r.options.valueType){case n.countryNameType.NAME:return(t||r.country).name;case n.countryNameType.ISO2:return(t||r.country).iso2;case n.countryNameType.ISO3:return(t||r.country).iso3}return(t||r.country).iso3},r.populate=function(){var u,f,i,t,e;if(r.options.populate){for(u=r.getName(),f=r.getValue(),i=0;i<r.fields.length;i++)t=n.getElement(r.fields[i]),e=n.getValue(t),n.setValue(t,n.selectList(t)?f:u),r.options.prepopulate&&e!=n.getValue(t)&&n.fire(t,"change");r.fire("populate")}},r.find=function(n){function t(t){if(t.data.alternates)for(var i=0;i<t.data.alternates.length;i++)if(t.data.alternates[i].toUpperCase()==n)return!0;return!1}return n=n.toString().toUpperCase(),(r.autocomplete.list.collection.first(function(i){return i.data.iso2.toUpperCase()==n||i.data.iso3.toUpperCase()==n||i.data.name.toUpperCase()==n||t(i)})||{}).data},r.first=function(){return r.autocomplete.list.collection.first().data},r.change=function(n){n&&(r.country=n,r.populate(),r.textChanged=!1,r.fire("change",r.country))},r.setFlagPosition=function(n,t){n.style.backgroundPosition="-1px -"+(t*16+2)+"px"},r.flag=function(){function i(n){r.setFlagPosition(t,n.flag)}var t=n.create("div",{className:"pcaflag"});return i(r.country),r.listen("change",i),t},r.setCountry=function(n){return r.change(r.find(n)),r},r.setCountryByIP=function(t){function i(n){n.length&&n[0].Iso3&&r.setCountry(n[0].Iso3)}t&&n.fetch("Extras/Web/Ip2Country/v1.10",{Key:t},i)},r.load()}}(),function(){var n=window.pca=window.pca||{};n.fieldMode={DEFAULT:3,NONE:0,SEARCH:1,POPULATE:2,PRESERVE:4,COUNTRY:8},n.Address=function(t,i){function u(){var t=n.getValue(r.autocomplete.field);t&&!r.first&&t.length>=r.options.minSearch&&(r.first=!0,r.search(t))}function f(n){for(var i={},t=0;t<n.length;t++)(n[t].FieldGroup=="Common"||n[t].FieldGroup=="Country")&&(i[n[t].FieldName]=n[t].FormattedValue);return i}var r=new n.Object(this);r.messages={DIDYOUMEAN:"Did you mean:",NORESULTS:"Sorry, no results were found",NOADDRESS:"Sorry, we could not find this address",SERVICEERROR:"Service Error:",COUNTRYSELECT:"Country Select",NOLOCATION:"Sorry, we could not get your location"},r.templates={AUTOCOMPLETE:"{Match}<b>{Suggestion}<\/b>",AUTOCOMPLETEFIND:"<b>{Suggestion}<\/b>"},r.fields=t||[],r.options=i||{},r.key=r.options.key||"",r.options.source=r.options.source||"",r.options.application=r.options.application||"",r.options.populate=typeof r.options.populate=="boolean"?r.options.populate:!0,r.options.onlyInputs=typeof r.options.onlyInputs=="boolean"?r.options.onlyInputs:!1,r.options.autoSearch=typeof r.options.autoSearch=="boolean"?r.options.autoSearch:!1,r.options.minSearch=r.options.minSearch||1,r.options.maxItems=r.options.maxItems||0,r.options.suppressAutocomplete=typeof r.options.suppressAutocomplete=="boolean"?r.options.suppressAutocomplete:!1,r.options.countries=r.options.countries||{},r.options.countries.defaultCode=r.options.countries.defaultCode||""||""||"GBR",r.options.countries.value=r.options.countries.value||"",r.options.countries.prepopulate=typeof r.options.countries.prepopulate=="boolean"?r.options.countries.prepopulate:!0,r.options.list=r.options.list||{},r.options.bar=r.options.bar||{},r.options.bar.visible=typeof r.options.bar.visible=="boolean"?r.options.bar.visible:!0,r.countryCode=r.options.countries.defaultCode,r.first=!1,r.searchAfterCountry=!1,r.autocomplete=null,r.countrylist=null,r.geolocation=null,r.load=function(){for(var l=[],f=[],t,c,o,a,s,v,h,i,y,p,e=0;e<r.fields.length;e++)t=r.fields[e],t.mode=t.mode||n.fieldMode.DEFAULT,t.mode&n.fieldMode.COUNTRY?f.push(t.element):t.mode&n.fieldMode.SEARCH&&l.push(t.element),r.options.suppressAutocomplete&&(c=n.getElement(t.element),c&&(c.autocomplete="off"));r.autocomplete=new n.AutoComplete(l,r.options.list),r.autocomplete.listen("keyup",function(n){(n==0||n==8||n>36)&&u()}),r.autocomplete.listen("focus",r.focus),r.autocomplete.listen("blur",r.blur),r.autocomplete.listen("dblclick",u),r.autocomplete.list.listen("filter",function(){r.search(n.getValue(r.autocomplete.field))}),r.autocomplete.listen("delete",function(){r.first=!1}),!r.options.countries.value&&f.length&&(r.options.countries.value=n.getValue(f[0])),r.countrylist=new n.CountryList(f,r.options.countries),r.countryCode=r.countrylist.country.iso3,r.countrylist.listen("change",function(n){r.countryCode=n&&n.iso3?n.iso3:r.options.countries.defaultCode,r.searchAfterCountry&&(r.autocomplete.field.focus(),u()),r.countrylist.autocomplete.hide(),r.fire("country",n)}),r.countrylist.autocomplete.listen("hide",function(){r.searchAfterCountry=!1}),o=n.create("div",{className:"flagbutton"}),a=r.countrylist.flag(),o.appendChild(a),r.autocomplete.footer.setContent(o).show(),n.listen(o,"click",r.showCountrylist),s=n.create("div",{className:"flagbutton"}),v=r.countrylist.flag(),s.appendChild(v),r.countrylist.autocomplete.footer.setContent(s),r.options.bar.visible&&r.countrylist.autocomplete.footer.show(),n.listen(s,"click",function(){r.searchAfterCountry&&(r.autocomplete.field.focus(),u()),r.countrylist.autocomplete.hide()}),h=n.create("div",{className:"pcamessage disableselect",innerHTML:r.messages.COUNTRYSELECT}),r.autocomplete.footer.setContent(h),i=n.create("a",{href:"http://www.postcodeanywhere.co.uk",target:"_blank"}),y=n.create("div",{className:"pcalogo"}),i.appendChild(y),r.autocomplete.footer.setContent(i),r.showFooterLogo=function(){i.style.display="",h.style.display="none"},r.showFooterMessage=function(){i.style.display="none",h.style.display=""},p=n.create("div",{className:"pcamessage disableselect",innerHTML:r.messages.COUNTRYSELECT}),r.countrylist.autocomplete.footer.setContent(p)},r.search=function(t){function i(n){n.length?r.showresults(n,r.templates.AUTOCOMPLETE):r.message(r.messages.NOADDRESS,!0)}return r.fire("search",t),t&&n.fetch("CapturePlus/Interactive/AutoComplete/v2.00",{Key:r.key,Country:r.countryCode,SearchTerm:t,$block:!0,$cache:!0},i,r.error),r},r.searchByLocation=function(t,i){function s(n){n&&n.coords?(u=n.coords.latitude+","+n.coords.longitude,e=n.coords.accuracy,r.geolocation=n.coords,o()):f()}function f(){r.message(r.messages.NOLOCATION,!0)}function o(){function t(n){n.length?r.showresults(n,r.templates.AUTOCOMPLETE):r.message(r.messages.NOADDRESS,!0)}n.fetch("CapturePlus/Interactive/AutoComplete/v2.00",{Key:r.key,Location:u,LocationAccuracy:e,$block:!0,$cache:!0},t,r.error)}var u="",e=0;return(t||t==0)&&(i||i==0)?(u=t+","+i,o()):navigator.geolocation?navigator.geolocation.getCurrentPosition(s,f,{enableHighAccuracy:!0}):f(),r},r.lookup=function(t){function i(n){n.length?r.showresults(n,r.templates.AUTOCOMPLETEFIND):r.message(r.messages.NOADDRESS,!0)}n.fetch("CapturePlus/Interactive/AutoCompleteFind/v2.00",{Key:r.key,Id:t},i,r.error)},r.retrieve=function(t){function i(n){n.length?r.populate(n):r.error(r.messages.NOADDRESS)}n.fetch("CapturePlus/Interactive/RetrieveById/v2.00",{Key:r.key,Id:t,Application:r.options.application,Source:r.options.source},i,r.error)},r.error=function(n){r.fire("error",n);throw r.messages.SERVICEERROR+" "+n;},r.showresults=function(n,t){return r.autocomplete.clear().add(n,t,r.select).show(),r.autocomplete.header.hide(),r.showFooterLogo(),r},r.message=function(n,t){return r.reset(),r.autocomplete.show(),r.autocomplete.header.setText(n).show(),r.showFooterMessage(),t&&r.autocomplete.clear().list.hide(),r},r.select=function(n){return r.fire("select",n),n.IsRetrievable?r.retrieve(n.Id):r.lookup(n.Id),r},r.populate=function(t){var u,i;for(t=f(t),r.autocomplete.hide(),r.options.countries.prepopulate&&r.countrylist.populate(),r.fire("prepopulate",t),u=0;u<r.fields.length&&r.options.populate;u++)(i=r.fields[u],i.mode&n.fieldMode.POPULATE)&&(!r.options.onlyInputs||n.inputField(i.element)||n.selectList(i.element)||n.checkBox(i.element))&&(i.mode&n.fieldMode.PRESERVE&&n.getValue(i.element)&&r.autocomplete.field!=n.getElement(i.element)||n.setValue(i.element,t[i.field]));return r.first=!1,r.fire("populate",t),r},r.getAddressLine=function(n,t,i,r){var e,u="",o,s,f;if(r=r&&!!n.Company,r){if(t==1&&i>1)return n.Company;t==1&&i==1?u=n.Company:(t--,i--)}for(e=n.Line1?n.Line2?n.Line3?n.Line4?n.Line5?5:4:3:2:1:0,o=Math.floor(1+(e/i+(i-(t-1))/i)*(t-1)),s=Math.floor(e/i+(i-t)/i),f=0;f<s;f++)u+=(u?", ":"")+(n["Line"+(f+o)]||"");return u},r.showCountrylist=function(){r.autocomplete.hide(),r.countrylist.autocomplete.position(r.autocomplete.field),r.countrylist.autocomplete.showAll(),r.countrylist.autocomplete.hover=!0,r.searchAfterCountry=!0},r.hideCountrylist=function(){r.countrylist.autocomplete.hide()},r.setCountry=function(n){return r.countrylist.setCountry(n),r},r.setCountryByIP=function(){return r.countrylist.setCountryByIP(r.key),r},r.clear=function(){for(var t=0;t<r.fields.length;t++)n.setValue(r.fields[t].element,"");return r.fire("clear"),r},r.focus=function(){r.reset(),r.options.autoSearch&&u(),r.fire("focus")},r.blur=function(){r.fire("blur")},r.reset=function(){return r.options.bar.visible?(r.autocomplete.list.clear().hide(),r.autocomplete.header.hide(),r.showFooterMessage()):(r.autocomplete.hide(),r.autocomplete.footer.hide()),r.first=!1,r},r.disable=function(){return r.autocomplete.disabled=!0,r.countrylist.autocomplete.disabled=!0,r},r.enable=function(){return r.autocomplete.disabled=!1,r.countrylist.autocomplete.disabled=!1,r},r.destroy=function(){return r.autocomplete.destroy(),r.countrylist.autocomplete.destroy(),r},n.ready(r.load)}}()